{"version":3,"sources":["../src/index.js"],"names":["tray","onMinimizeCallback","createIcon","base64","buffer","Buffer","from","remote","nativeImage","createFromBuffer","createMenu","Menu","buildFromTemplate","label","click","inkdrop","window","show","type","app","quit","onMinimize","config","get","hide","minimizeToTray","title","default","activate","isMainWindow","Tray","setToolTip","setContextMenu","on","isMinimized","deactivate","destroy","off"],"mappings":";;;;;;;;;AAAA;;AAEA,IAAIA,IAAI,GAAG,IAAX;AACA,IAAIC,kBAAkB,GAAG,IAAzB;;AAEA,SAASC,UAAT,GAAsB;AACpB;AACA;AACA,QAAMC,MAAM,GAAG,skHAAf;AACA,QAAMC,MAAM,GAAGC,MAAM,CAACC,IAAP,CAAYH,MAAZ,EAAoB,QAApB,CAAf;AACA,SAAOI,iBAAOC,WAAP,CAAmBC,gBAAnB,CAAoCL,MAApC,CAAP;AACD;;AAED,SAASM,UAAT,GAAsB;AACpB,SAAOH,iBAAOI,IAAP,CAAYC,iBAAZ,CAA8B,CACnC;AACEC,IAAAA,KAAK,EAAE,cADT;AAEEC,IAAAA,KAAK,EAAE,MAAMC,OAAO,CAACC,MAAR,CAAeC,IAAf;AAFf,GADmC,EAKnC;AAAEC,IAAAA,IAAI,EAAE;AAAR,GALmC,EAMnC;AACEL,IAAAA,KAAK,EAAE,MADT;AAEEC,IAAAA,KAAK,EAAE,MAAMP,iBAAOY,GAAP,CAAWC,IAAX;AAFf,GANmC,CAA9B,CAAP;AAWD;;AAED,SAASC,UAAT,GAAsB;AACpB,MAAIN,OAAO,CAACO,MAAR,CAAeC,GAAf,CAAmB,qBAAnB,CAAJ,EAA+C;AAC7CR,IAAAA,OAAO,CAACC,MAAR,CAAeQ,IAAf;AACD;AACF;;AAEM,MAAMF,MAAM,GAAG;AACpBG,EAAAA,cAAc,EAAE;AACdC,IAAAA,KAAK,EAAE,kBADO;AAEdR,IAAAA,IAAI,EAAE,SAFQ;AAGdS,IAAAA,OAAO,EAAE;AAHK;AADI,CAAf;;;AAQA,SAASC,QAAT,GAAoB;AACzB,MAAI,CAACb,OAAO,CAACc,YAAb,EAA2B;AACzB;AACD;;AAED7B,EAAAA,IAAI,GAAG,IAAIO,iBAAOuB,IAAX,CAAgB5B,UAAU,EAA1B,CAAP;AACAF,EAAAA,IAAI,CAAC+B,UAAL,CAAgB,SAAhB;AACA/B,EAAAA,IAAI,CAACgC,cAAL,CAAoBtB,UAAU,EAA9B;AACAV,EAAAA,IAAI,CAACiC,EAAL,CAAQ,OAAR,EAAiB,MAAMlB,OAAO,CAACC,MAAR,CAAeC,IAAf,EAAvB;;AAEAhB,EAAAA,kBAAkB,GAAG,MAAMoB,UAAU,EAArC;;AACAN,EAAAA,OAAO,CAACC,MAAR,CAAeiB,EAAf,CAAkB,UAAlB,EAA8BhC,kBAA9B;;AAEA,MAAIc,OAAO,CAACC,MAAR,CAAekB,WAAf,EAAJ,EAAkC;AAChCb,IAAAA,UAAU;AACX;AACF;;AAEM,SAASc,UAAT,GAAsB;AAC3B,MAAInC,IAAI,KAAK,IAAb,EAAmB;AACjBA,IAAAA,IAAI,CAACoC,OAAL;AACApC,IAAAA,IAAI,GAAG,IAAP;AACD;;AAED,MAAIC,kBAAkB,KAAK,IAA3B,EAAiC;AAC/Bc,IAAAA,OAAO,CAACC,MAAR,CAAeqB,GAAf,CAAmB,UAAnB,EAA+BpC,kBAA/B;AACAA,IAAAA,kBAAkB,GAAG,IAArB;AACD;AACF","sourcesContent":["import { remote } from 'electron';\n\nlet tray = null;\nlet onMinimizeCallback = null;\n\nfunction createIcon() {\n  // https://inkdrop.app/icons/icon-48x48.png\n  // prettier-ignore\n  const base64 = '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';\n  const buffer = Buffer.from(base64, 'base64');\n  return remote.nativeImage.createFromBuffer(buffer);\n}\n\nfunction createMenu() {\n  return remote.Menu.buildFromTemplate([\n    {\n      label: 'Show Inkdrop',\n      click: () => inkdrop.window.show(),\n    },\n    { type: 'separator' },\n    {\n      label: 'Quit',\n      click: () => remote.app.quit(),\n    },\n  ]);\n}\n\nfunction onMinimize() {\n  if (inkdrop.config.get('tray.minimizeToTray')) {\n    inkdrop.window.hide();\n  }\n}\n\nexport const config = {\n  minimizeToTray: {\n    title: 'Minimize to tray',\n    type: 'boolean',\n    default: true,\n  },\n};\n\nexport function activate() {\n  if (!inkdrop.isMainWindow) {\n    return;\n  }\n\n  tray = new remote.Tray(createIcon());\n  tray.setToolTip('Inkdrop');\n  tray.setContextMenu(createMenu());\n  tray.on('click', () => inkdrop.window.show());\n\n  onMinimizeCallback = () => onMinimize();\n  inkdrop.window.on('minimize', onMinimizeCallback);\n\n  if (inkdrop.window.isMinimized()) {\n    onMinimize();\n  }\n}\n\nexport function deactivate() {\n  if (tray !== null) {\n    tray.destroy();\n    tray = null;\n  }\n\n  if (onMinimizeCallback !== null) {\n    inkdrop.window.off('minimize', onMinimizeCallback);\n    onMinimizeCallback = null;\n  }\n}\n"],"file":"index.js"}